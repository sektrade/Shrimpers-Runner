<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<title>Shrimp Runner ‚Äî Final</title>
<style>
:root{--bg:#87ceeb;--ui:#ffffff;--ink:#0b1320;--accent:#ff4557}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto;display:flex;flex-direction:column;align-items:center;background:linear-gradient(#87ceeb,#c3e7ff);min-height:100vh}
.wrap{padding:18px;display:flex;flex-direction:column;align-items:center;gap:12px;max-width:900px;width:100%}
canvas{width:100%;max-width:900px;height:auto;border-radius:18px;box-shadow:0 12px 36px rgba(0,0,0,.2);background:linear-gradient(#87ceeb,#7cc7ff)}
.hud{width:100%;display:flex;justify-content:space-between;align-items:center}
.btn{background:#0b1320;color:white;border:0;padding:10px 14px;border-radius:12px;font-weight:700;cursor:pointer}
.btn.secondary{background:var(--accent)}
.brand{font-weight:800}
.tip{opacity:.85}
</style>
</head>
<body>
<div class="wrap">
  <canvas id="game" width="900" height="520" aria-label="Shrimp Runner"></canvas>
  <div class="hud">
    <div class="brand">ü¶ê Shrimp Runner</div>
    <div class="tip">Kontrol: <b>Bo≈üluk</b> veya <b>Dokun</b> ‚Äî Zƒ±pla</div>
    <div>
      <button id="btnStart" class="btn">Ba≈üla / Yeniden</button>
      <button id="btnMute" class="btn secondary">Sesi Kapat</button>
    </div>
  </div>
</div>
<script>
const PAN_SRC = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA4UlEQVR4nO3ZQRKDIAyF4djpYbj/aXKbduWGaSVBQCD/txZJnnHGEREAAAAAAAAAkRyjNkopfbxrVLV7fd02qGm4pEcgTW/Yo+l/WoXR5CYjG8/dDeLW4icbz9UGUbVopsZz3iBe3g1mbl7EX58rgNmbP3nqNI/LKs17qOrhfgV2Ywpgx6d/YgJKF+z89EWYAAJ4P13ACFdfh+EnoBjAiJ8SPZXqZwIsF606BZa6mQDrhatNgbVe1wSsEoKnTvcrMHsI3vr4J9hi87B/hXNhzwV+CXkydGXWs0EAAAAAAAL6AsNTVN7G3G7EAAAAAElFTkSuQmCC';
const KNIFE_SRC = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABVElEQVR4nO2ayxHCMAwFBUMJVMIptVAgtfhEJfQQTrkx2LL1z9sz40jrpwRnQgQAAAAAAAAAP2it7d41aHLp/YAjYNu27nrRGCpYOgWRRLkIGMVCVGgBHGZlXTUXz8CQgAy01vaZpJYRcMCVMCwg0xhwJJRLwMHoSJQVcNCTwBKQaQwOejWXTsDIhpUVMJpWtoAMY8CpsVwCuBtUSsBMOqcERByD2Zpu0oVYs7oZqUdAIonTArzHQOr6KRMgKT+dAOnkLQmwHgON66VJgJbsFAI0k7YsQHsMtNcPnQCLe0xYAVY3WBEB0sVaPl3CJcD60RpKgMffazEBq8V7nS1CJMDzYOX6PsD7REkknABOQxGaJ3IagSjNEzkIiNQ8kYKAfw1Ga57IMAERmycyEhC1eVVmP1mxRm1nno+7evOv98fvtXgVIMC7AG8gwLsAb04vAICT8wXbFFF+NrUi4gAAAABJRU5ErkJggg==';
const LEMON_SRC = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABNElEQVR4nO2a3RHCIBAG0Qa0FuuwXOuwFq1An5hhmBx3RwIhYfeZn/sWMjFgCAAAAAAAADAfl14TfV7h5+1zf7avr9kENYE1WgjZdMAWoSW2krF6EGvo28M/9vdta7dGRnVHLXhNYA1NSI2IKgFS+BahJSQZXgluAUvhewbPWRLhkWBuOFrwnFoRJgF5+JGC5+QiNAlX7wQjhw/BX58qIF390cNH0jq1t1VRQM8fNi0p5TA/AkdZ/Yi1XlHAWVY/IuUx7YCjrX7EUrf7LXA2ELB3AXuDAEsj63f5aFjqFgX0OI/riZTH/AgcbRdY6y0KOMsuKOVQd0Da+Si7IK1z88/h0SV46+NEyDvRaCK6nQmmTH0qHJn6XiBl2puhJaa8G5SY8na4xKj/DwAAAAAAAAAAmI4/UDZrMkLapI0AAAAASUVORK5CYII=';
const FALLBACK_SHRIMP = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAACYElEQVR4nO2dy07DMBBFDeJTuuj/f00X/RdYoEg0pPFrxr7xnLOshOy5h+s0BTUpAQAAAAAAjOVj9gZqed7v37U/c3s8LjOn9EZbwi9FVZLcpjwlvENJjsxGZojYoyBm+gYUROyZKWbawooi9swQM3zBK4jYM1LM56iFUrqmjJTG7nuI+auKOMK7Le4NWUlGSv7zuApZTcaG51xuQlaVseE1n4uQ1WVseMxpLiSKjA3reU2FRJOxYTm3mZCoMjas5jcREl3GhkUO3UKQ8UpvHkM/OoE8XUJoxzE9uTQLQcY5rflwZInRJIR2lNGSEw0Ro1oI7aijNi8aIkaVENrRRk1uNESM4r8Pr9yO2+Px77Xn/e6xTjbv8A05knH2ujehheRCnyGlSMiKx1Vp2JZSSnIM3RBFECIGQsRAiBhZISte0FMqv8+wvh/J5Rm6IbmwPW4Oc4QWktL70GfISCmlrymrijEr/CPCN0QNhIiBEDEQIgZCxECIGAgRAyFiIESMrBCFb8hZiVyeNEQMhIiBEDEQIkaREC7sNvCfixcEIWIUC+HY6qM0PxoiRpUQWtJGTW40RIxqIbSkjtq8aIgYTUJoSRktOdEQMZqF0JJzWvPpaghSjunJhSNLjG4htOSV3jxMGoKUXyxyMDuyokuxmt/0GhJViuXc5hf1aFKs53V5lxVFisecbm97V5fiNZ/rfciqUjzncr8xXE2K9zxDw7rylxCM+sUa+tHJVdsyct886fOEEE/63KMoJuSzcPcoiFE4UqdvYA/PUxfGU46ShL9IbuqMFkmq4QMAAAAABOUH59jic5T9uzIAAAAASUVORK5CYII=';

const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const W = canvas.width, H = canvas.height;
const GROUND_H = 96;

let muted = false;
let audioCtx = null;
function beep(freq,d=0.06){ if(muted) return; if(!audioCtx) audioCtx=new (window.AudioContext||window.webkitAudioContext)(); const o=audioCtx.createOscillator(); const g=audioCtx.createGain(); o.type='sine'; o.frequency.value=freq; g.gain.value=0.03; o.connect(g); g.connect(audioCtx.destination); o.start(); o.stop(audioCtx.currentTime+d); }

const panImg = new Image(); panImg.src = PAN_SRC;
const knifeImg = new Image(); knifeImg.src = KNIFE_SRC;
const lemonImg = new Image(); lemonImg.src = LEMON_SRC;

const shrimpImg = new Image();
fetch('shrimp_character.png').then(r=>{ if(r.ok){ shrimpImg.src='shrimp_character.png'; } else { shrimpImg.src = FALLBACK_SHRIMP; }}).catch(e=>{ shrimpImg.src = FALLBACK_SHRIMP; });

const obstaclePool = [panImg, knifeImg, lemonImg];

let state = {};
let hi = +localStorage.getItem('shrimp_hi') || 0;

function reset(){ state = { playing:false, over:false, t:0, speed:5.5, score:0, shrimp:{x:150,y:H-GROUND_H-64,vy:0,w:72,h:96,onGround:true}, obstacles:[], clouds:[], particles:[] }; for(let i=0;i<6;i++) state.clouds.push({x:Math.random()*W,y:30+Math.random()*150,s:0.2+Math.random()*0.5}); }

function start(){ reset(); state.playing=true; beep(660,0.05); }

function gameOver(){ state.over=true; state.playing=false; hi = Math.max(hi, Math.floor(state.score)); localStorage.setItem('shrimp_hi', hi); beep(180,0.12); }

document.getElementById('btnStart').onclick = () => { start(); }
document.getElementById('btnMute').onclick = ()=>{ muted=!muted; document.getElementById('btnMute').textContent = muted ? 'Sesi A√ß':'Sesi Kapat'; }

function jump(){ if(!state) return; if(!state.playing && !state.over) start(); if(state.over) return; if(state.shrimp.onGround){ state.shrimp.vy = -11.6; state.shrimp.onGround=false; beep(880,0.06); }};
document.addEventListener('keydown', e=>{ if(e.code==='Space'||e.code==='ArrowUp') { e.preventDefault(); jump(); }});
canvas.addEventListener('pointerdown', e=>{ e.preventDefault(); jump(); });

function spawnObstacle(){ const type = obstaclePool[Math.floor(Math.random()*obstaclePool.length)]; const size = 36 + Math.random()*30; state.obstacles.push({ x: W + 40, y: H - GROUND_H - size, w: size, h: size, img: type, passed:false }); }

function update(dt){
  if(!state.playing) return;
  state.t += dt;
  state.speed = Math.min(9.25, 5.5 + state.t * 0.15);
  if(state.obstacles.length===0 || state.obstacles[state.obstacles.length-1].x < W - (260 + Math.random()*160)) spawnObstacle();
  for(const c of state.clouds){ c.x -= c.s * state.speed * 0.25; if(c.x < -120){ c.x = W + Math.random()*200; c.y = 30 + Math.random()*150; c.s = 0.2+Math.random()*0.5; } }
  state.shrimp.vy += 0.65;
  state.shrimp.y += state.shrimp.vy;
  const groundY = H - GROUND_H - state.shrimp.h/4;
  if(state.shrimp.y >= groundY){ state.shrimp.y = groundY; state.shrimp.vy = 0; state.shrimp.onGround = true; }
  for(const o of state.obstacles){ o.x -= state.speed; if(!o.passed && o.x + o.w < state.shrimp.x){ o.passed=true; state.score+=1; beep(1040,0.03); if(state.score % 5 === 0){ for(let i=0;i<10;i++) state.particles.push({ x: state.shrimp.x + 20, y: state.shrimp.y, vx: (Math.random()*4)-2, vy: -Math.random()*3-1, life:0.6+Math.random()*0.6 }); } } }
  state.obstacles = state.obstacles.filter(o => o.x > -120);
  for(const p of state.particles){ p.x += p.vx; p.y += p.vy; p.vy += 0.12; p.life -= dt; }
  state.particles = state.particles.filter(p => p.life > 0);
  for(const o of state.obstacles){
    const sx = state.shrimp.x + 10, sy = state.shrimp.y + 8;
    const sw = state.shrimp.w * 0.8, sh = state.shrimp.h * 0.8;
    const overlap = !(sx+sw < o.x+4 || sx > o.x + o.w - 4 || sy+sh < o.y+6 || sy > o.y + o.h - 6);
    if(overlap){ gameOver(); break; }
  }
}

function drawGround(){
  const seaY = H - GROUND_H - 22;
  ctx.fillStyle = '#5fb3ff';
  ctx.fillRect(0, seaY-10, W, 10);
  ctx.fillStyle = '#f1d9a3';
  ctx.fillRect(0, H - GROUND_H, W, GROUND_H);
  ctx.fillStyle = 'rgba(0,0,0,.08)';
  for(let x=0;x<W;x+=30){ ctx.fillRect(x, H - GROUND_H + 24, 16, 3); }
}

function drawCloud(x,y,s){
  ctx.fillStyle = 'rgba(255,255,255,.9)';
  ctx.beginPath();
  ctx.ellipse(x, y, 30*s, 18*s, 0, 0, Math.PI*2);
  ctx.ellipse(x+22*s, y+6*s, 24*s, 14*s, 0, 0, Math.PI*2);
  ctx.ellipse(x-22*s, y+10*s, 26*s, 16*s, 0, 0, Math.PI*2);
  ctx.fill();
}

function drawShrimp(){
  const s = state.shrimp;
  const bob = Math.sin(state.t*10) * 2;
  const scale = 0.9;
  ctx.save();
  ctx.translate(s.x, s.y + bob);
  const tilt = Math.max(-0.35, Math.min(0.25, -s.vy*0.03));
  ctx.rotate(tilt);
  const dw = s.w * scale;
  const dh = s.h * scale;
  ctx.drawImage(shrimpImg, -dw*0.2, -dh*0.65, dw, dh);
  ctx.restore();
}

function drawObstacles(){
  for(const o of state.obstacles){
    ctx.drawImage(o.img, o.x, o.y, o.w, o.h);
  }
}

function drawUI(){
  ctx.fillStyle = 'rgba(0,0,0,.45)';
  ctx.font = '700 22px system-ui';
  ctx.textAlign = 'left';
  ctx.fillText('Skor: ' + Math.floor(state.score), 20, 34);
  ctx.textAlign = 'right';
  ctx.fillText('En ƒ∞yi: ' + hi, W - 20, 34);
  if(!state.playing && !state.over){
    ctx.textAlign='center';
    ctx.font='800 40px system-ui';
    ctx.fillStyle='rgba(0,0,0,.75)';
    ctx.fillText('Bo≈üluk / Dokun ‚Üí Zƒ±pla', W/2, H/2 - 10);
    ctx.font='700 18px system-ui';
    ctx.fillText('Engellerden ka√ß ve rekorunu kƒ±r!', W/2, H/2 + 18);
  }
  if(state.over){
    ctx.fillStyle='rgba(0,0,0,.45)';
    ctx.fillRect(0,0,W,H);
    ctx.fillStyle='white';
    ctx.textAlign='center';
    ctx.font='900 42px system-ui';
    ctx.fillText('OYUN Bƒ∞TTƒ∞', W/2, H/2 - 30);
    ctx.font='700 20px system-ui';
    ctx.fillText('Skor: ' + Math.floor(state.score) + ' ‚Äî En ƒ∞yi: ' + hi, W/2, H/2 + 6);
    ctx.fillText('Yeniden Ba≈ülamak i√ßin: Butona bas veya Bo≈üluk', W/2, H/2 + 34);
  }
}

let last = 0;
function frame(t){
  const now = t/1000;
  const dt = Math.min(0.033, now - last || 0.016);
  last = now;
  ctx.clearRect(0,0,W,H);
  state.clouds.forEach(c=>drawCloud(c.x,c.y,c.s));
  drawGround();
  update(dt);
  drawObstacles();
  drawShrimp();
  for(const p of state.particles){ ctx.fillStyle='rgba(255,100,120,.85)'; ctx.fillRect(p.x,p.y,3,3); }
  drawUI();
  requestAnimationFrame(frame);
}

reset();
requestAnimationFrame(frame);
</script>
</body>
</html>
