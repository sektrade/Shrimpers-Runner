<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>Shrimp Runner ‚Äî Kƒ±rmƒ±zƒ± Karides</title>
<style>
  :root {
    --bg: #0d1b2a;
    --sea: #1b263b;
    --sky: #64b5f6;
    --sand: #f5e6c8;
    --ink: #0b1320;
    --ui: #ffffff;
    --accent: #ff4557;
  }
  * { box-sizing: border-box; }
  html, body {
    margin: 0;
    height: 100%;
    background: linear-gradient(180deg, var(--sky) 0%, #8fd3ff 60%, #c3e7ff 100%);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    color: var(--ink);
  }
  .wrap {
    display: grid;
    place-items: center;
    padding: 16px;
    gap: 12px;
  }
  canvas {
    width: min(100%, 900px);
    height: auto;
    border-radius: 20px;
    box-shadow: 0 12px 40px rgba(0,0,0,.25);
    background: linear-gradient(#87ceeb, #7cc7ff);
    display: block;
  }
  .hud {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    width: min(100%, 900px);
    align-items: center;
    justify-content: space-between;
  }
  .btn {
    appearance: none;
    border: 0;
    border-radius: 12px;
    padding: 10px 14px;
    font-weight: 700;
    background: var(--ink);
    color: white;
    cursor: pointer;
    box-shadow: 0 6px 16px rgba(0,0,0,.2);
  }
  .btn.secondary { background: var(--accent); }
  .tip {
    opacity: .75;
    font-size: 14px;
  }
  .brand {
    font-weight: 800;
    letter-spacing: .3px;
  }
  a { color: var(--ink); }
</style>
</head>
<body>
  <div class="wrap">
    <canvas id="game" width="900" height="520" aria-label="Shrimp Runner Canvas"></canvas>
    <div class="hud">
      <div class="brand">ü¶ê Shrimp Runner</div>
      <div class="tip">Kontrol: <b>Bo≈üluk</b> veya <b>Dokun</b> ‚Üí Zƒ±pla</div>
      <div>
        <button id="btnStart" class="btn">Ba≈üla / Yeniden</button>
        <button id="btnMute" class="btn secondary">Sesi Kapat</button>
      </div>
    </div>
  </div>

<script>
// Base64 g√∂rsel verisini buraya ekleyin:
const SHRIMP_IMG_SRC = "data:image/png;base64,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

// Basic helpers
const clamp = (v, a, b) => Math.max(a, Math.min(b, v));
const rand = (a, b) => Math.random() * (b - a) + a;

// Game constants
const W = 900, H = 520;
const GROUND_H = 96;
const GRAVITY = 0.65;
const JUMP_VY = -11.6;
const MAX_SPEED = 9.25;
const MIN_SPEED = 5.5;

// Canvas & context
const cv = document.getElementById('game');
const ctx = cv.getContext('2d');

// Audio (subtle)
const AudioCtx = window.AudioContext || window.webkitAudioContext;
let audioCtx = null;
let muted = false;
function beep(freq, dur=0.07, type='sine', vol=0.03) {
  if (muted) return;
  if (!audioCtx) audioCtx = new AudioCtx();
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.type = type; o.frequency.value = freq;
  g.gain.value = vol;
  o.connect(g); g.connect(audioCtx.destination);
  o.start();
  o.stop(audioCtx.currentTime + dur);
}

// Load shrimp image
const shrimpImg = new Image();
shrimpImg.src = SHRIMP_IMG_SRC;

let state = null;
let hiScore = +localStorage.getItem('shrimp_hi') || 0;

// A crop that frames the shrimp inside the provided poster image.
const SRC_CROP = { x: 300, y: 520, w: 650, h: 950 };

function reset() {
  state = {
    playing: false,
    over: false,
    t: 0,
    speed: MIN_SPEED,
    score: 0,
    shrimp: {
      x: 150,
      y: H - GROUND_H - 64,
      vy: 0,
      w: 72,
      h: 96,
      onGround: true,
    },
    obstacles: [],
    clouds: [],
    particles: []
  };
  for (let i=0;i<6;i++) state.clouds.push({
    x: rand(0, W), y: rand(30, 180), s: rand(0.2, 0.7)
  });
}

function startGame() {
  reset();
  state.playing = true;
  beep(660, 0.05, 'square', 0.05);
}

function gameOver() {
  state.over = true;
  state.playing = false;
  hiScore = Math.max(hiScore, Math.floor(state.score));
  localStorage.setItem('shrimp_hi', hiScore);
  beep(220, 0.1, 'sawtooth', 0.04);
  beep(180, 0.2, 'sawtooth', 0.04);
}

// Input
function jump() {
  if (!state) return;
  if (!state.playing && !state.over) startGame();
  if (state.over) return;
  if (state.shrimp.onGround) {
    state.shrimp.vy = JUMP_VY;
    state.shrimp.onGround = false;
    beep(880, 0.07, 'triangle', 0.04);
  }
}
document.addEventListener('keydown', (e) => {
  if (e.code === 'Space' || e.code === 'ArrowUp' || e.code === 'KeyW') { e.preventDefault(); jump(); }
});
cv.addEventListener('pointerdown', (e) => { e.preventDefault(); jump(); });

document.getElementById('btnStart').onclick = () => startGame();
document.getElementById('btnMute').onclick = () => {
  muted = !muted;
  document.getElementById('btnMute').textContent = muted ? 'Sesi A√ß' : 'Sesi Kapat';
};

// Spawn obstacles
function spawnObstacle() {
  const baseH = rand(36, 60);
  const type = Math.random() < 0.5 ? 'pan' : 'knife';
  state.obstacles.push({
    x: W + 40,
    y: H - GROUND_H - baseH,
    w: type==='pan' ? rand(36, 54) : rand(20, 28),
    h: baseH,
    type,
    passed: false
  });
}

function update(dt) {
  if (!state.playing) return;

  state.t += dt;
  state.speed = Math.max(MIN_SPEED, Math.min(MAX_SPEED, MIN_SPEED + state.t * 0.15));

  if (state.obstacles.length === 0 || state.obstacles[state.obstacles.length - 1].x < W - rand(260, 420)) {
    spawnObstacle();
  }

  for (const c of state.clouds) {
    c.x -= c.s * state.speed * 0.25;
    if (c.x < -120) { c.x = W + rand(0, 200); c.y = rand(30, 180); c.s = rand(0.2, 0.7); }
  }

  state.shrimp.vy += GRAVITY;
  state.shrimp.y += state.shrimp.vy;
  const groundY = H - GROUND_H - state.shrimp.h / 4;
  if (state.shrimp.y >= groundY) {
    state.shrimp.y = groundY;
    state.shrimp.vy = 0;
    state.shrimp.onGround = true;
  }

  for (const o of state.obstacles) {
    o.x -= state.speed;
    if (!o.passed && o.x + o.w < state.shrimp.x) {
      o.passed = true;
      state.score += 1;
      beep(1040, 0.05, 'triangle', 0.04);
      if (state.score % 5 === 0) {
        for (let i=0;i<12;i++) state.particles.push({
          x: state.shrimp.x + 20, y: state.shrimp.y, vx: rand(-2,2), vy: rand(-3,-1), life: rand(0.5,1.0)
        });
      }
    }
  }
  state.obstacles = state.obstacles.filter(o => o.x > -80);

  for (const p of state.particles) {
    p.x += p.vx; p.y += p.vy; p.vy += 0.12; p.life -= dt;
  }
  state.particles = state.particles.filter(p => p.life > 0);

  for (const o of state.obstacles) {
    const sx = state.shrimp.x + 10, sy = state.shrimp.y + 8;
    const sw = state.shrimp.w * 0.8, sh = state.shrimp.h * 0.8;
    const overlap = !(sx+sw < o.x+4 || sx > o.x + o.w - 4 || sy+sh < o.y+6 || sy > o.y + o.h - 6);
    if (overlap) { gameOver(); break; }
  }
}

function drawGround() {
  const seaY = H - GROUND_H - 22;
  ctx.fillStyle = '#5fb3ff';
  ctx.fillRect(0, seaY-10, W, 10);
  ctx.fillStyle = '#f1d9a3';
  ctx.fillRect(0, H - GROUND_H, W, GROUND_H);
  ctx.fillStyle = 'rgba(0,0,0,.08)';
  for (let x=0; x<W; x+=30) {
    ctx.fillRect(x, H - GROUND_H + 24, 16, 3);
  }
}

function drawCloud(x,y,s) {
  ctx.fillStyle = 'rgba(255,255,255,.9)';
  ctx.beginPath();
  ctx.ellipse(x, y, 30*s, 18*s, 0, 0, Math.PI*2);
  ctx.ellipse(x+22*s, y+6*s, 24*s, 14*s, 0, 0, Math.PI*2);
  ctx.ellipse(x-22*s, y+10*s, 26*s, 16*s, 0, 0, Math.PI*2);
  ctx.fill();
}

function drawObstacle(o) {
  if (o.type === 'pan') {
    ctx.fillStyle = '#222';
    ctx.fillRect(o.x, o.y, o.w, o.h);
    ctx.fillRect(o.x + o.w*0.3, o.y-8, o.w*0.4, 8);
    ctx.fillStyle = 'rgba(255,255,255,.1)';
    ctx.fillRect(o.x+3, o.y+3, o.w-6, 4);
  } else {
    ctx.fillStyle = '#c0c5ce';
    ctx.fillRect(o.x, o.y+8, o.w, o.h-8);
    ctx.fillStyle = '#222';
    ctx.fillRect(o.x, o.y, o.w, 10);
  }
}

function drawShrimp() {
  const s = state.shrimp;
  const bob = Math.sin(state.t*10) * 2;
  const scale = 0.16;
  const dw = SRC_CROP.w * scale;
  const dh = SRC_CROP.h * scale;
  ctx.save();
  ctx.translate(s.x, s.y + bob);
  const tilt = Math.max(-0.35, Math.min(0.25, -s.vy*0.03));
  ctx.rotate(tilt);
  ctx.drawImage(
    shrimpImg,
    SRC_CROP.x, SRC_CROP.y, SRC_CROP.w, SRC_CROP.h,
    -dw*0.2, -dh*0.65,
    dw, dh
  );
  ctx.restore();
}

function drawUI() {
  ctx.fillStyle = 'rgba(0,0,0,.4)';
  ctx.font = '700 22px system-ui, -apple-system, Segoe UI, Roboto';
  ctx.textAlign = 'left';
  ctx.fillText('Skor: ' + Math.floor(state.score), 20, 34);
  ctx.textAlign = 'right';
  ctx.fillText('En ƒ∞yi: ' + hiScore, W - 20, 34);

  if (!state.playing && !state.over) {
    ctx.textAlign = 'center';
    ctx.font = '800 40px system-ui, -apple-system, Segoe UI, Roboto';
    ctx.fillStyle = 'rgba(0,0,0,.75)';
    ctx.fillText('Bo≈üluk / Dokun ‚Üí Zƒ±pla', W/2, H/2 - 10);
    ctx.font = '700 18px system-ui';
    ctx.fillText('Engellerden ka√ß ve rekorunu kƒ±r!', W/2, H/2 + 18);
  }

  if (state.over) {
    ctx.fillStyle = 'rgba(0,0,0,.45)';
    ctx.fillRect(0, 0, W, H);
    ctx.fillStyle = 'white';
    ctx.textAlign = 'center';
    ctx.font = '900 42px system-ui, -apple-system, Segoe UI, Roboto';
    ctx.fillText('OYUN Bƒ∞TTƒ∞', W/2, H/2 - 30);
    ctx.font = '700 20px system-ui';
    ctx.fillText('Skor: ' + Math.floor(state.score) + ' ‚Äî En ƒ∞yi: ' + hiScore, W/2, H/2 + 6);
    ctx.fillText('Yeniden Ba≈ülamak i√ßin: Butona bas veya Bo≈üluk', W/2, H/2 + 34);
  }
}

// Main loop
let last = 0;
function frame(t) {
  const now = t/1000;
  const dt = Math.min(0.033, now - last || 0.016);
  last = now;

  ctx.clearRect(0,0,W,H);

  state.clouds.forEach(c => drawCloud(c.x, c.y, c.s));
  drawGround();
  update(dt);
  for (const o of state.obstacles) drawObstacle(o);
  for (const p of state.particles) {
    ctx.fillStyle = 'rgba(255,100,120,.8)';
    ctx.fillRect(p.x, p.y, 3, 3);
  }
  drawShrimp();
  drawUI();
  requestAnimationFrame(frame);
}

reset();
requestAnimationFrame(frame);
</script>
</body>
</html>
